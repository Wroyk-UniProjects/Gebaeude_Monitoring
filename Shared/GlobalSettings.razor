@page "/globalsettings"

<div class="flex w-full justify-center">
	<div class="w-60">
		<h1 class="text-center font-bold text-xl my-5">Global Settings</h1>

		<!-- Temperature -->
		<p class="text-center text-xl">Target Temperature:</p>
		<div class="flex items-center mb-4">
			<button class="mx-auto border-2 border-sky-500 rounded-full px-3.5 pb-1 my-1 font-bold text-sky-500 text-3xl">-</button>
			<p class="mx-auto w-12 text-xl text-center text-sky-500">@cnfg.TargetTemp</p>
			<button class="mx-auto border-2 border-sky-500 rounded-full px-3 p-1 my-1 font-bold text-sky-500 text-2xl">+</button>
			<span class="mx-auto w-12 text-xl font-bold">°C</span>
		</div>

		<!-- Humidity -->
		<p class="text-center text-xl">Target Humidity:</p>
		<div class="flex items-center mb-4">
			<button class="mx-auto border-2 border-sky-500 rounded-full px-3.5 pb-1 my-1 font-bold text-sky-500 text-3xl">-</button>
			<p class="mx-auto w-12 text-xl text-center text-sky-500">@cnfg.TargetHumi</p>
			<button class="mx-auto border-2 border-sky-500 rounded-full px-3 p-1 my-1 font-bold text-sky-500 text-2xl">+</button>
			<span class="mx-auto w-12 text-xl font-bold">%</span>
		</div>

		<!-- Update Rate -->
		<p class="text-center text-xl">Update Rate:</p>
		<div class="flex items-center mb-4">
			<button class="mx-auto border-2 border-sky-500 rounded-full px-3.5 pb-1 my-1 font-bold text-sky-500 text-3xl">-</button>
			<p class="mx-auto w-12 text-xl text-center text-sky-500">@cnfg.UpdateRate</p>
			<button class="mx-auto border-2 border-sky-500 rounded-full px-3 p-1 my-1 font-bold text-sky-500 text-2xl">+</button>
			<span class="mx-auto w-12 text-xl font-bold">Sec.</span>
		</div>

		<!-- Tolerance -->
		<p class="text-center text-xl">Tolerance:</p>
		<div class="flex items-center mb-4">
			<button @onclick="decrementTole" class="mx-auto border-2 border-sky-500 rounded-full px-3.5 pb-1 my-1 font-bold text-sky-500 text-3xl">-</button>
			<p class="mx-auto w-12 text-xl text-center text-sky-500">@cnfg.TargetHumi-@cnfg.LoToleHumi</p>
			<button @onclick="incrementTole" class="mx-auto border-2 border-sky-500 rounded-full px-3 p-1 my-1 font-bold text-sky-500 text-2xl">+</button>
			<span class="mx-auto w-12 text-xl font-bold">+/-</span>
		</div>

		<!-- Save and Cancel Buttons -->
		<div class="flex flex-col justify-center">
			<button class="m-3 py-1 bg-sky-500 border-2 rounded-full text-center font-bold hover:text-gray-700 focus:text-gray-700">Save</button>
			<button @onclick="undoChanges" class="mx-6 py-1 bg-gray-200 rounded-full">Cancel</button>
		</div>
	</div>
</div>

@code {
	public Config oldCnfg { get; set; } = new Config();
	public Config cnfg { get; set; } = new Config();
	private double tolerance = 2.0;
	private int maxLimit = 500;
	private int minLimit = 0;

	[Inject]
	public IConfigService CnfgService { get; set; }

	protected async override Task OnInitializedAsync()
	{

		oldCnfg = await CnfgService.GetConfig();
		cnfg = await CnfgService.GetConfig();

	}

	private void decrementTole() { tolerance -= 0.5;	}
	private void incrementTole() { tolerance += 0.5;    }

	private void undoChanges() { cnfg = oldCnfg; }
}
