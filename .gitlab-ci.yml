default:
  image: mcr.microsoft.com/dotnet/sdk:6.0
 

stages:
  - test

test:
  stage: test
  services:
    - name: docker:dind
      alias: localhost
  script:
    - apt-get install unzip -y
    - curl "https://chromedriver.storage.googleapis.com/103.0.5060.53/chromedriver_linux64.zip" --output chrome.zip
    - unzip chrome.zip
    - mv chromedriver chrome/usr/bin/google-chrome/chromedriver
    - cd Building_Monitoring_WebApp
    - dotnet run &
    - sleep 8
    - cd ..
    - cd Building_Monitoring_WebApp.Tests
    - dotnet test
